<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mi sitio</title>
  
  <!-- Estilos y fuentes -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css" integrity="sha512-DxV+EoADOkOygM4IR9yXP8Sb2qwgidEmeqAEmDKIOfPRQZOWbXCzLC6vjbZyy0vPisbH2SyW27+ddLVCN+OMzQ==" crossorigin="anonymous" referrerpolicy="no-referrer">
  
  <style>
    @import "https://fonts.googleapis.com/css2?family=Gothic+A1&family=Nunito:ital,wght@0,200..1000;1,200..1000&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap";
    
    :root {
      --azul-primario: #05184a;
      --azul-secundario: #1d4ed8;
      --azul-claro: #60a5fa;
      --azul-muy-claro: #dbeafe;
      --azul-oscuro: #1e293b;
      --azul-marino: #0f172a;
      --azul-cielo: #0ea5e9;
      --blanco: #ffffff;
      --gris-claro: #f8fafc;
      --gris-medio: #64748b;
      --gris-fuerte: rgb(66, 72, 82);
      --azul-gradiente: linear-gradient(135deg, #0a1840 0%, #051c40 100%);
      --azul-fondo-imagenes: linear-gradient(to right, rgba(5, 26, 82, .689) 100%, rgba(2, 16, 55, .05) 50%, rgba(255, 255, 255, 0) 100%);
      --azul-fondo: linear-gradient(135deg, #0a1128 0%, #001f54 50%, #034078 100%);
      --titulo-gradiante: linear-gradient(135deg, #1d4ed8, #05184a);
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: Franklin Gothic Medium, Arial Narrow, Arial, sans-serif;
    }
    
    html {
      overflow-x: hidden;
    }
  </style>
  
  <link rel="stylesheet" href="/_astro/about.CJdYp1i6.css">
  <link rel="stylesheet" href="/_astro/gallery.Cpz4DQGD.css">
</head>

<body>
  <!-- Encabezado -->
  <header>
    <nav class="navbar">
      <!-- Botón hamburguesa (solo móvil) -->
      <button class="hamburger-btn" id="hamburger-btn">
        <i class="fas fa-bars"></i>
      </button>
      
      <!-- Logo -->
      <div class="logo">
        <img src="/logo_chava.png" alt="Logo" style="width: 9.5rem;height: auto;">
      </div>
      
      <!-- Menú desktop -->
      <ul class="menu">
        <li><a href="/">Inicio</a></li>
        <li><a href="/about">Sobre mí</a></li>
        <li><a href="/contact">Contacto</a></li>
        <li><a href="/gallery">Galería</a></li>
      </ul>
      
      <!-- Redes sociales desktop -->
      <ul class="social-icons">
        <li><a href="https://www.facebook.com/ChavaCalderonMX/" target="_blank"><img src="/facebook.png" alt="facebook chava calderon"></a></li>
        <li><a href="https://www.instagram.com/schavacalderon_/?hl=es" target="_blank"><img src="/logotipo-de-instagram.png" alt="instagram chava calderon"></a></li>
        <li><a href="https://www.tiktok.com/@chava.calderon90" target="_blank"><img src="/tik-tok.png" alt="tik tok chava calderon"></a></li>
      </ul>
    </nav>
    
    <!-- Menú mobile overlay -->
    <div class="mobile-menu" id="mobile-menu">
      <button class="close-btn" id="close-btn">
        <i class="fas fa-times"></i>
      </button>
      
      <ul class="menu">
        <li><a href="/">Inicio</a></li>
        <li><a href="/about">Sobre mí</a></li>
        <li><a href="/contact">Contacto</a></li>
        <li><a href="/gallery">Galería</a></li>
      </ul>
      
      <!-- Redes sociales MOVIL -->
      <ul class="social-icons">
        <li><a href="https://www.facebook.com/ChavaCalderonMX/" target="_blank"><img src="/facebook.png" alt="facebook chava calderon"></a></li>
        <li><a href="https://www.instagram.com/schavacalderon_/?hl=es" target="_blank"><img src="/logotipo-de-instagram.png" alt="instagram chava calderon"></a></li>
        <li><a href="https://www.tiktok.com/@chava.calderon90" target="_blank"><img src="/tik-tok.png" alt="tik tok chava calderon"></a></li>
      </ul>
    </div>
  </header>

  <!-- Script de navegación -->
  <script>
    function initNavbar() {
      const hamburgerBtn = document.getElementById('hamburger-btn');
      const mobileMenu = document.getElementById('mobile-menu');
      const closeBtn = document.getElementById('close-btn');

      // Verificar que todos los elementos existan
      if (!hamburgerBtn || !mobileMenu || !closeBtn) {
        console.error('Elementos del navbar no encontrados');
        return;
      }

      // Abrir menú móvil
      hamburgerBtn.addEventListener('click', function() {
        mobileMenu.classList.add('active');
        document.body.style.overflow = 'hidden';
      });

      // Cerrar menú móvil
      closeBtn.addEventListener('click', function() {
        mobileMenu.classList.remove('active');
        document.body.style.overflow = 'auto';
      });

      // Cerrar menú al hacer clic en los enlaces
      const mobileMenuLinks = mobileMenu.querySelectorAll('a');
      mobileMenuLinks.forEach(function(link) {
        link.addEventListener('click', function() {
          mobileMenu.classList.remove('active');
          document.body.style.overflow = 'auto';
        });
      });

      // Cerrar menú al hacer clic en el fondo
      mobileMenu.addEventListener('click', function(e) {
        if (e.target === mobileMenu) {
          mobileMenu.classList.remove('active');
          document.body.style.overflow = 'auto';
        }
      });

      // Cerrar menú con tecla Escape
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && mobileMenu.classList.contains('active')) {
          mobileMenu.classList.remove('active');
          document.body.style.overflow = 'auto';
        }
      });
    }

    // Inicializar cuando el DOM esté listo
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initNavbar);
    } else {
      initNavbar();
    }
  </script>

  <!-- Contenido principal -->
  <main>
    <section class="seccion-hero" data-astro-cid-znzsb7xz>
      <div class="contenido-hero" data-astro-cid-znzsb7xz>
        <!-- Contenido de texto a la derecha -->
        <div class="contenido-superpuesto" data-astro-cid-znzsb7xz>
          <h2 data-astro-cid-znzsb7xz>GALERIA</h2>
        </div>
      </div>
    </section>
    
    <div class="loading" id="loading">
      <div class="spinner"></div>
    </div>
    
    <div class="lightbox" id="lightbox">
      <div class="lightbox-content">
        <button class="lightbox-close" id="lightboxClose">&times;</button>
        <img class="lightbox-image" id="lightboxImage" src="" alt="">
      </div>
    </div>
    
    <div class="container">
      <div class="gallery-grid" id="galleryGrid">
          <!-- Las noticias se cargarán aquí dinámicamente -->
      </div>
    
      <!-- Contenedor de paginación -->
      <div id="pagination"></div>
    </div>
  </main>
<style>
  /* Estilo solo para la estrella - no afecta tu CSS existente */
.featured-star {
    position: absolute;
    top: 10px;
    right: 10px;
    color: gold;
    font-size: 24px;
    text-shadow: 0 0 3px rgba(0, 0, 0, 0.8);
    z-index: 10;
    pointer-events: none;
}

/* Estilos básicos de paginación (puedes adaptarlos a tu diseño) */
#pagination {
    display: flex;
    justify-content: center;
    gap: 5px;
    margin-top: 20px;
    flex-wrap: wrap;
}

.pagination-btn {
    padding: 5px 10px;
    border: 1px solid #ddd;
    background: #fff;
    cursor: pointer;
    border-radius: 3px;
}

.pagination-btn.active {
    background: #007bff;
    color: white;
    border-color: #007bff;
}

.pagination-btn:hover:not(.active) {
    background: #f0f0f0;
}
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
    const galleryGrid = document.getElementById('galleryGrid');
    const paginationContainer = document.getElementById('pagination');
    let currentNewsData = []; // Almacena las noticias cargadas
    let currentPage = 1;
    const itemsPerPage = 6;

    // Cargar noticias
    async function loadNews(page) {
        try {
            const response = await fetch(`../back/api_fotos_galeria.php?page=${page}&per_page=${itemsPerPage}`);
            const data = await response.json();
            
            if (data.success) {
                currentNewsData = data.data; // Guardar datos actuales
                renderNews(currentNewsData);
                updatePagination(data.pagination);
                addFeaturedStars();
            }
        } catch (error) {
            console.error('Error al cargar noticias:', error);
        }
    }

    // Renderizar noticias
    function renderNews(news) {
        galleryGrid.innerHTML = '';
        
        news.forEach(item => {
            const newsElement = document.createElement('div');
            newsElement.className = 'gallery-item';
            newsElement.dataset.featured = item.destacada;
            newsElement.dataset.id = item.id;
            
            newsElement.innerHTML = `
                <div class="gallery-image">
                    <img src="${item.imagen}" alt="Noticia ${item.id}" loading="lazy">
                </div>
                <div class="gallery-overlay">
                    <div class="gallery-content"></div>
                </div>
            `;
            
            galleryGrid.appendChild(newsElement);
        });
    }

    //agregar estrellas
    function addFeaturedStars() {
        document.querySelectorAll('.gallery-item[data-featured="true"]').forEach(item => {
            const star = document.createElement('div');
            star.className = 'featured-star';
            star.innerHTML = '<img src="banner.svg" style="width: 4.5rem;height: 50%;">';
            item.querySelector('.gallery-image').appendChild(star);
        });
    }
    
    galleryGrid.addEventListener('click', function(e) {
        // Versión más flexible que funciona con cualquier elemento dentro del item
        const galleryItem = e.target.closest('.gallery-item');
        if (!galleryItem) return;
        
        // Excluir elementos que no deben triggerear la redirección
        if (e.target.closest('button, a, [data-no-redirect]')) return;
        
        const newsId = galleryItem.dataset.id;
        redirectToNewsDetail(newsId);
    });

    // Función para redirigir a la noticia completa
    function redirectToNewsDetail(idNoticia) {
        window.location.href = `../noticiacompleta.html?id=${encodeURIComponent(idNoticia)}`;
    }

    // Actualizar paginación (igual que antes)
    function updatePagination(pagination) {
        paginationContainer.innerHTML = '';
        
        // Botón Anterior
        if (pagination.has_prev_page) {
            const prevBtn = document.createElement('button');
            prevBtn.className = 'pagination-btn';
            prevBtn.textContent = 'Anterior';
            prevBtn.addEventListener('click', () => {
                currentPage--;
                loadNews(currentPage);
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
            paginationContainer.appendChild(prevBtn);
        }
        
        // Números de página
        const startPage = Math.max(1, currentPage - 2);
        const endPage = Math.min(pagination.total_pages, currentPage + 2);
        
        for (let i = startPage; i <= endPage; i++) {
            const pageBtn = document.createElement('button');
            pageBtn.className = `pagination-btn ${i === currentPage ? 'active' : ''}`;
            pageBtn.textContent = i;
            pageBtn.addEventListener('click', () => {
                currentPage = i;
                loadNews(currentPage);
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
            paginationContainer.appendChild(pageBtn);
        }
        
        // Botón Siguiente
        if (pagination.has_next_page) {
            const nextBtn = document.createElement('button');
            nextBtn.className = 'pagination-btn';
            nextBtn.textContent = 'Siguiente';
            nextBtn.addEventListener('click', () => {
                currentPage++;
                loadNews(currentPage);
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
            paginationContainer.appendChild(nextBtn);
        }
    }

    // Cargar primera página
    loadNews(currentPage);
});
</script>

  <!-- Pie de página -->
  <footer>
    <!-- Efectos de fondo -->
    <div class="particles-background" id="particles"></div>
    
    <!-- FIGURAS REDISTRIBUIDAS Y REDUCIDAS -->
    <div class="geometric-shapes">
      <div class="shape circle" style="width: 40px; height: 40px; top: 40%; left: 95%; animation-delay: 0s;"></div>
      <div class="shape triangle" style="top: 10%; left: 19%; animation-delay: 3s;"></div>
      <div class="shape circle" style="width: 25px; height: 25px; top: 20%; right: 20%; animation-delay: 4s;"></div>
      <div class="shape triangle" style="bottom: 15%; top: 10%; left: 0%; animation-delay: 2s;"></div>
      <div class="shape circle" style="width: 35px; height: 35px; bottom: 8%; left: 25%; animation-delay: 5s;"></div>
      <div class="shape circle" style="width: 20px; height: 20px; top: 50%; left: 3%; animation-delay: 6s;"></div>
    </div>
    
    <div class="waves"></div>
    <div class="glow-effect"></div>
    
    <!-- Contenido del footer -->
    <div class="footer-container">
      <div class="footer-social">
        <ul class="social-icons">
          <li><a href="https://www.facebook.com/ChavaCalderonMX/" target="_blank"><img src="/facebook.png" alt="facebook chava calderon"></a></li>
          <li><a href="https://www.instagram.com/schavacalderon_/?hl=es" target="_blank"><img src="/logotipo-de-instagram.png" alt="instagram chava calderon"></a></li>
          <li><a href="https://www.tiktok.com/@chava.calderon90" target="_blank"><img src="/tik-tok.png" alt="tik tok chava calderon"></a></li>
        </ul>
      </div>
      
      <div class="footer-bottom">
        <p>&copy; 2025 Chava Calderón. Todos los derechos reservados</p>
        <p>Desarrollado por <a href="https://geckcodex.online/" target="_blank">GECK Codex</a></p>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script type="module">
    function initParticles() {
      const particles = document.getElementById("particles");
      
      function createParticle() {
        const particle = document.createElement("div");
        particle.className = "particle";
        
        const size = Math.random() * 2 + 1;
        particle.style.width = size + "px";
        particle.style.height = size + "px";
        particle.style.left = Math.random() * 100 + "%";
        
        const duration = Math.random() * 4 + 6;
        particle.style.animationDuration = duration + "s";
        
        const delay = Math.random() * 2;
        particle.style.animationDelay = delay + "s";
        particle.style.opacity = Math.random() * 0.3 + 0.1;
        
        particles.appendChild(particle);
        
        setTimeout(() => {
          if (particle.parentNode) {
            particle.parentNode.removeChild(particle);
          }
        }, (duration + delay) * 1000);
      }
      
      setInterval(createParticle, 800);
    }
    
    document.addEventListener("DOMContentLoaded", initParticles);
    
    // Efecto de movimiento con el mouse
    document.addEventListener("mousemove", (e) => {
      const shapes = document.querySelectorAll(".shape");
      const mouseX = e.clientX / window.innerWidth;
      const mouseY = e.clientY / window.innerHeight;
      
      shapes.forEach((shape, index) => {
        const strength = (index + 1) * 0.2;
        const xMovement = (mouseX - 0.5) * strength;
        const yMovement = (mouseY - 0.5) * strength;
        
        shape.style.transform += ` translate(${xMovement}px, ${yMovement}px)`;
      });
    });
    
    // Efecto hover en iconos sociales
    document.querySelectorAll(".social-icons a").forEach(icon => {
      icon.addEventListener("mouseenter", () => {
        icon.style.boxShadow = "0 0 25px rgba(0, 191, 255, 0.6)";
      });
      
      icon.addEventListener("mouseleave", () => {
        icon.style.boxShadow = "";
      });
    });
  </script>
  
  <script type="module">
    class Gallery {
      constructor() {
        this.galleryGrid = document.getElementById("galleryGrid");
        this.filterButtons = document.querySelectorAll(".filter-btn");
        this.counter = document.getElementById("counter");
        this.lightbox = document.getElementById("lightbox");
        this.lightboxImage = document.getElementById("lightboxImage");
        this.lightboxClose = document.getElementById("lightboxClose");
        this.loading = document.getElementById("loading");
        this.galleryItems = document.querySelectorAll(".gallery-item");
        this.init();
      }
      
      init() {
        this.setupFilterListeners();
        this.setupLightboxListeners();
        this.setupImageClickListeners();
        this.animateItems();
        this.updateCounter("all");
      }
      
      setupFilterListeners() {
        this.filterButtons.forEach(button => {
          button.addEventListener("click", (e) => {
            this.filterButtons.forEach(btn => btn.classList.remove("active"));
            e.target.classList.add("active");
            
            const filter = e.target.getAttribute("data-filter");
            this.filterItems(filter);
            this.updateCounter(filter);
          });
        });
      }
      
      filterItems(filter) {
        this.showLoading();
        
        setTimeout(() => {
          this.galleryItems.forEach((item, index) => {
            const category = item.getAttribute("data-category");
            
            if (filter === "all" || category === filter) {
              item.style.display = "block";
              setTimeout(() => {
                item.style.opacity = "1";
                item.style.transform = "translateY(0)";
              }, index * 100);
            } else {
              item.style.opacity = "0";
              item.style.transform = "translateY(30px)";
              setTimeout(() => {
                item.style.display = "none";
              }, 300);
            }
          });
          
          this.hideLoading();
        }, 500);
      }
      
      updateCounter(filter) {
        let count = 0;
        
        if (filter === "all") {
          count = this.galleryItems.length;
        } else {
          this.galleryItems.forEach(item => {
            if (item.getAttribute("data-category") === filter) {
              count++;
            }
          });
        }
        
        this.counter.textContent = `${count} elemento${count !== 1 ? "s" : ""}`;
      }
      
      setupLightboxListeners() {
        this.lightboxClose.addEventListener("click", () => {
          this.closeLightbox();
        });
        
        this.lightbox.addEventListener("click", (e) => {
          if (e.target === this.lightbox) {
            this.closeLightbox();
          }
        });
        
        document.addEventListener("keydown", (e) => {
          if (e.key === "Escape" && this.lightbox.classList.contains("show")) {
            this.closeLightbox();
          }
        });
      }
      
      setupImageClickListeners() {
        this.galleryItems.forEach(item => {
          const img = item.querySelector(".gallery-image img");
          
          img.addEventListener("click", (e) => {
            e.preventDefault();
            e.stopPropagation();
            
            const fullSizeSrc = img.src.replace("w=400&h=400", "w=1200&h=800");
            this.openLightbox(fullSizeSrc, img.alt);
          });
          
          img.style.cursor = "pointer";
        });
      }
      
      openLightbox(src, alt) {
        this.lightboxImage.src = src;
        this.lightboxImage.alt = alt;
        this.lightbox.classList.add("show");
        document.body.style.overflow = "hidden";
      }
      
      closeLightbox() {
        this.lightbox.classList.remove("show");
        document.body.style.overflow = "auto";
        
        setTimeout(() => {
          if (!this.lightbox.classList.contains("show")) {
            this.lightboxImage.src = "";
          }
        }, 300);
      }
      
      showLoading() {
        this.loading.classList.add("show");
        this.galleryGrid.style.opacity = "0.5";
      }
      
      hideLoading() {
        this.loading.classList.remove("show");
        this.galleryGrid.style.opacity = "1";
      }
      
      animateItems() {
        this.galleryItems.forEach((item, index) => {
          setTimeout(() => {
            item.style.animationDelay = `${index * 0.1}s`;
            item.style.opacity = "1";
            item.style.transform = "translateY(0)";
          }, index * 100);
        });
      }
    }
    
    class Utils {
      static debounce(func, wait) {
        let timeout;
        return function(...args) {
          const later = () => {
            clearTimeout(timeout);
            func(...args);
          };
          clearTimeout(timeout);
          timeout = setTimeout(later, wait);
        };
      }
      
      static throttle(func, limit) {
        let inThrottle;
        return function() {
          const args = arguments;
          const context = this;
          if (!inThrottle) {
            func.apply(context, args);
            inThrottle = true;
            setTimeout(() => (inThrottle = false), limit);
          }
        };
      }
    }
    
    document.addEventListener("DOMContentLoaded", () => {
      new Gallery();
      
      const images = document.querySelectorAll(".gallery-image img");
      
      if ("IntersectionObserver" in window) {
        const observer = new IntersectionObserver((entries, observer) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              const img = entry.target;
              img.classList.add("loaded");
              observer.unobserve(img);
            }
          });
        });
        
        images.forEach(img => observer.observe(img));
      }
      
      const handleResize = Utils.throttle(() => {
        console.log("Window resized");
      }, 250);
      
      window.addEventListener("resize", handleResize);
      console.log("Galería inicializada correctamente");
    });
  </script>
</body>
</html>